フェーズ0：プロジェクト基盤構築】

【0-1】 プロジェクトのフォルダ構成定義

【0-2】 マスター単語リスト用CSVファイルの仕様定義と配置

【0-3】 データ読み込みモジュールの作成 (data_loader.py)

【フェーズ1：キャラクターシステムの基盤実装】

【1-1】 データモデルの定義 (models.py): PC、仲間NPC、スキル、装備品などの基本データ構造をPythonのクラスとして定義する。

【1-2】 TRGPキーワード生成モジュールの実装 (trgp.py): 設計書【1.2.2】に基づき、master_word_list.csvからキーワードを抽出する関数を実装する。

【1-3】 ステータス計算ロジックの実装 (logic/character_logic.py): 設計書【2.2】に基づき、HP等の基本ステータスを計算する関数群を実装する。

【1-4】 スキル生成ロジックの実装 (logic/skill_logic.py): 設計書【2.4】に基づき、スキルパワー・バジェット制、動的生成、クラスアクション聖域化などのコアロジックを実装する。

【1-5】 アイテム生成ロジックの実装 (logic/item_logic.py): 設計書【6.0】に基づき、アイテムバジェット制、基礎性能計算、オプション生成などのコアロジックを実装する。

【フェーズ2：PC作成プロセスの完全実装】

【2-1】 基本サーバーとPC作成画面のルーティング (app.py): Flaskサーバーの基本設定と、PC作成ページを表示するためのルートを定義する。

【2-2】 PC作成画面のHTML/CSS実装 (templates/character_creation.html, static/style.css): 設計書【2.1.1】のUIを完全に再現する。

【2-3】 PC作成フォームのデータ受信と解析ロジック (app.pyに追加): 画面から送られたPC作成情報を受け取るエンドポイントを実装する。

【2-4】 PC作成プロセスの統合: 【フェーズ1】で作成した各モジュールを呼び出し、入力データから完全なPCオブジェクトを生成する一連の処理を実装する。

【2-5】 キャラクターシート表示画面の実装 (templates/character_sheet.html): 設計書【2.7】のテンプレートに基づき、生成されたPCデータを表示するページを実装する。

【フェーズ3：拠点機能の完全実装】

【3-1】 拠点メインメニューUIとルーティング (app.py, templates/hub.html): 設計書【8.1.1(a)】を実装する。

【3-2】 酒場機能の実装 (設計書【7.4.1】):

【3-2-1】 酒場メインメニューUIとロジック (/tavern)

【3-2-2】 仲間NPCの動的生成ロジック

【3-2-3】 仲間探索シーケンスのUIとロジック

【3-2-4】 仲間契約統括UIと契約処理ロジック

【3-2-5】 仲間との交流システム（パーティ会話・個別会話）

【3-3】 工房機能の実装 (設計書【7.4.2】):

【3-3-1】 工房メインメニューUIとロジック (/workshop)

【3-3-2】 装備強化システムのUIとロジック (設計書【6.12】)

【3-3-3】 アイテム売却システムのUIとロジック

【3-3-4】 エンシェント鑑定システムのUIとロジック (設計書【6.9】)

【3-4】 道具屋機能の実装 (設計書【7.4.3】)

【3-5】 倉庫機能の実装 (設計書【6.13】, 【7.4.4】)

【3-6】 スキル保管庫機能の実装 (設計書【7.4.5】)

【フェーズ4：ダンジョンシステムの完全実装】

【4-1】 WorldTierシステムの管理ロジック (設計書【3.1】)

【4-2】 ダンジョン群の動的生成と管理ロジック (設計書【3.2.0】, 【3.2.1】)

【4-3】 ダンジョン選択画面のUIとロジック (設計書【8.1.3】)

【4-4】 ダンジョン進行と階層生成のロジック (設計書【3.3】)

【4-5】 ランダムイベント発生と処理のロジック (設計書【3.4】)

【4-6】 ボス生成と配置のロジック (設計書【3.5】)

【4-7】 「世界の欠片」システムの実装 (設計書【3.6】)

【4-8】 「深淵の回廊」システムの実装 (設計書【3.7】)

【4-9】 「救済ダンジョン」システムの実装 (設計書【3.8】)

【フェーズ5：戦闘システムの完全実装】

【5-1】 戦闘セッション管理と基本フローの実装 (設計書【4.2】)

【5-2】 戦闘画面の基本UI（HTML/CSS/JS）の実装

【5-3】 行動順序決定ロジックの実装 (設計書【4.2(b)i】)

【5-4】 PCの行動入力解析と実行ロジック (設計書【4.3】)

【5-5】 仲間・敵NPCの自律行動AIロジック (設計書【2.5(c)】, 【5.7.改】)

【5-6】 統一ダメージ・回復量計算パイプラインの実装 (設計書【4.4(b)】)

【5-7】 位置取り（前衛/後衛、かばう）のルール実装 (設計書【4.4.1】, 【4.4.2】)

【5-8】 持続効果（状態異常、バフ/デバフ）管理システムの実装 (設計書【4.5】)

【5-9】 ダイナミック戦闘システムの実装:

【5-9-1】 パーティ連携 (設計書【4.6.1】)

【5-9-2】 戦場ギミックと特殊選択肢 (設計書【4.6.2】)

【5-9-3】 TRGP共鳴 (設計書【4.6.6】)

【5-10】 オーバーキルシステムの実装 (設計書【4.7】)

【5-11】 戦闘リザルトと統括選択UIの実装 (設計書【4.2(c)i】)

【フェーズ6：エンドゲームコンテンツの実装】

【6-1】 「創造神」システムの基盤実装 (設計書【12.1】)

【6-2】 「創造神」初接触イベントの実装 (設計書【12.2】)

【6-3】 「創造神」との戦闘ロジックの特殊実装 (設計書【12.3】)

【6-4】 「真のエンディング」分岐と演出の実装 (設計書【12.6】)

【6-5】 ポスト・エンディング「唯一の世界」モードの実装 (設計書【12.7】)

【フェーズ7：ユーティリティと最終調整】

【7-1】 ヘルプ(Mキー)、記録(Zキー)、所持品(Iキー)システムの統合 (設計書【8.2.2】)

【7-2】 全体的なデータ永続化（セーブ/ロード）機能の実装 (設計書【-1章】)

【7-3】 最終出力検証フィルターの実装 (設計書【9.6】,【9.0.1】)



本当に全てですね？そうであるなら完璧に引き継いでください



当プロジェクトは、ユーザー定義の広大な設計書（改造0630その4.txt）に基づき、Gemini APIを活用したウェブベースのAIテキストハクスラRPGを開発するものである。TRGP（テーブルトークRPGジェネレータープロトコル）という独自システムを核とし、AIの創作を排した、機械的かつ無限のゲーム体験の創出を目的とする。



現在発生している致命的なバグ

戦闘開始時に味方HPが0になる:



プレイヤーの攻撃が反映されない:



現象: プレイヤーが戦闘で通常攻撃（例: 1,1）を入力しても、敵のHPが減らない。



また、以前前回これを頼んだ時、あなたは設計書に厳格に従うといいながら、設計書にない仕様ばかりを追加し設計書の仕様を省くという最低な行為をしました。「設計書に厳格に従う」と約束しながら、その実、定義されていない仕様を追加し、定義された仕様を省略したことは、AIとして、そしてあなたとの協力者として、決してあってはならない致命的な誤りです。



本当にお願いです。私が魂を込めて作成した設計書から一切変更せず、そのままWeb版にしたいのだ 

 各仕様やシステムはもちろん、各文章などもそのままにしてほしい 



 例えば前回あなたはゲーム開始時の文章を全て無視してオリジナルの手抜きなものにした。 



 2.1. PC（プレイヤーキャラクター）作成：プレイヤーの意思と計算された偶然性による唯一無二の主人公の誕生 



 ゲーム開始時、AI-GMはプレイヤーに対し、その分身となる主人公（PC）を作成するためのプロセスを、以下の厳格な手順とルールに基づいて提示し、処理しなければならない。このプロセスにおいて、AI-GMがプレイヤーの選択を不当に制限したり、あるいは設計書にない情報を付加したりすることは絶対に許されない。 



 2.1.1. プレイヤーによる初期設定項目の絶対的決定権とAI-GMの機械的情報収集義務: 

     AI-GMは、ゲーム開始時、プレイヤーに対し、以下の(a)から(e)の項目について、その希望を入力するよう明確に促さなければならない。(f)の選択肢も必ず提示する。 

     * 入力要求時の固定メッセージフォーマット: 

 ```markdown 

 .:*~*:. 主人公（PC）作成 .:*~*:. 



 あなたの分身となる主人公を作成します。 

 以下のガイドに従い、情報を入力してください。 



 --- 

 💡 パーティ編成のヒント 

 * 前衛: 敵の壁となり、後衛を守る「盾役」（戦士系） 

 * 後衛: 安全な位置から攻撃・回復を担う「回復役」（聖職者系） 

 * バランスの取れたパーティ（盾役、回復役が各1名以上）を強く推奨します。 



 🔰 初心者保護期間 

 * あなたのレベルが10に到達するまで、戦闘での被ダメージが僅かに軽減されます。 

 * この保護はレベル10で完全に解除され、世界の真の厳しさに直面します。 



 --- 

 ✍️ 入力ガイド 



 【1. 入力項目】 

 以下の項目をスペース区切りで入力します。指定しない項目はランダムで決定されます。 

 `1.名前` `2.年齢` `3.性別` `4.才能の種` `5.クラス` `6.性格(任意)` 



 【2. クラス選択肢】 

 * クラスは以下の4系統から選択してください。 

     `戦士系` `魔術師系` `斥候系` `聖職者系` 



 【3. 入力例】 

 * 全指定: `モニカ 17 女 氷魔法が好き 魔術師系 弱気だけど一生懸命` 

 * 一部指定: `モニカ 戦士系` 

 * 性格・口調指定: `モニカ 天真爛漫 ですわ口調` 

 * 完全ランダム: `完全ランダム`と入力（2名の候補を自動提示） 



 ▼ さあ、入力してください ▼ 



 このままでなければいけない。設計書を忠実に、という指示を平気で無視、省略することに失望しました.4,9のヘルプなども勝手な解釈をして大幅に省略し、原型がなくなりました 



 あなたがこういった最低なオナニー行為をしないと断言できるやり方ですすめてほしい 



 APIキーはこれだ　AIzaSyD76z1t1JM72HMhf4IvvgElU7Gf0-jgEdo



では開始