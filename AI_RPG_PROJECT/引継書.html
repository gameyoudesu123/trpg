私は現在この設計書を一切改変しないことを前提に、あなたにウェブアプリとして再構築してもらってる

ウェブアプリの進捗フォルダを渡す前に下記を把握してください


フェーズ0：プロジェクト基盤構築】

【0-1】 プロジェクトのフォルダ構成定義

【0-2】 マスター単語リスト用CSVファイルの仕様定義と配置

【0-3】 データ読み込みモジュールの作成 (data_loader.py)

【フェーズ1：キャラクターシステムの基盤実装】

【1-1】 データモデルの定義 (models.py): PC、仲間NPC、スキル、装備品などの基本データ構造をPythonのクラスとして定義する。

【1-2】 TRGPキーワード生成モジュールの実装 (trgp.py): 設計書【1.2.2】に基づき、master_word_list.csvからキーワードを抽出する関数を実装する。

【1-3】 ステータス計算ロジックの実装 (logic/character_logic.py): 設計書【2.2】に基づき、HP等の基本ステータスを計算する関数群を実装する。

【1-4】 スキル生成ロジックの実装 (logic/skill_logic.py): 設計書【2.4】に基づき、スキルパワー・バジェット制、動的生成、クラスアクション聖域化などのコアロジックを実装する。

【1-5】 アイテム生成ロジックの実装 (logic/item_logic.py): 設計書【6.0】に基づき、アイテムバジェット制、基礎性能計算、オプション生成などのコアロジックを実装する。

【フェーズ2：PC作成プロセスの完全実装】

【2-1】 基本サーバーとPC作成画面のルーティング (app.py): Flaskサーバーの基本設定と、PC作成ページを表示するためのルートを定義する。

【2-2】 PC作成画面のHTML/CSS実装 (templates/character_creation.html, static/style.css): 設計書【2.1.1】のUIを完全に再現する。

【2-3】 PC作成フォームのデータ受信と解析ロジック (app.pyに追加): 画面から送られたPC作成情報を受け取るエンドポイントを実装する。

【2-4】 PC作成プロセスの統合: 【フェーズ1】で作成した各モジュールを呼び出し、入力データから完全なPCオブジェクトを生成する一連の処理を実装する。

【2-5】 キャラクターシート表示画面の実装 (templates/character_sheet.html): 設計書【2.7】のテンプレートに基づき、生成されたPCデータを表示するページを実装する。

【フェーズ3：拠点機能の完全実装】

【3-1】 拠点メインメニューUIとルーティング (app.py, templates/hub.html): 設計書【8.1.1(a)】を実装する。

【3-2】 酒場機能の実装 (設計書【7.4.1】):

【3-2-1】 酒場メインメニューUIとロジック (/tavern)

【3-2-2】 仲間NPCの動的生成ロジック

【3-2-3】 仲間探索シーケンスのUIとロジック

【3-2-4】 仲間契約統括UIと契約処理ロジック

【3-2-5】 仲間との交流システム（パーティ会話・個別会話）

【3-3】 工房機能の実装 (設計書【7.4.2】):

【3-3-1】 工房メインメニューUIとロジック (/workshop)

【3-3-2】 装備強化システムのUIとロジック (設計書【6.12】)

【3-3-3】 アイテム売却システムのUIとロジック

【3-3-4】 エンシェント鑑定システムのUIとロジック (設計書【6.9】)

【3-4】 道具屋機能の実装 (設計書【7.4.3】)

【3-5】 倉庫機能の実装 (設計書【6.13】, 【7.4.4】)

【3-6】 スキル保管庫機能の実装 (設計書【7.4.5】)

【フェーズ4：ダンジョンシステムの完全実装】

【4-1】 WorldTierシステムの管理ロジック (設計書【3.1】)

【4-2】 ダンジョン群の動的生成と管理ロジック (設計書【3.2.0】, 【3.2.1】)

【4-3】 ダンジョン選択画面のUIとロジック (設計書【8.1.3】)

【4-4】 ダンジョン進行と階層生成のロジック (設計書【3.3】)

【4-5】 ランダムイベント発生と処理のロジック (設計書【3.4】)

【4-6】 ボス生成と配置のロジック (設計書【3.5】)

【4-7】 「世界の欠片」システムの実装 (設計書【3.6】)

【4-8】 「深淵の回廊」システムの実装 (設計書【3.7】)

【4-9】 「救済ダンジョン」システムの実装 (設計書【3.8】)

【フェーズ5：戦闘システムの完全実装】

【5-1】 戦闘セッション管理と基本フローの実装 (設計書【4.2】)

【5-2】 戦闘画面の基本UI（HTML/CSS/JS）の実装

【5-3】 行動順序決定ロジックの実装 (設計書【4.2(b)i】)

【5-4】 PCの行動入力解析と実行ロジック (設計書【4.3】)

【5-5】 仲間・敵NPCの自律行動AIロジック (設計書【2.5(c)】, 【5.7.改】)

【5-6】 統一ダメージ・回復量計算パイプラインの実装 (設計書【4.4(b)】)

【5-7】 位置取り（前衛/後衛、かばう）のルール実装 (設計書【4.4.1】, 【4.4.2】)

【5-8】 持続効果（状態異常、バフ/デバフ）管理システムの実装 (設計書【4.5】)

【5-9】 ダイナミック戦闘システムの実装:

【5-9-1】 パーティ連携 (設計書【4.6.1】)

【5-9-2】 戦場ギミックと特殊選択肢 (設計書【4.6.2】)

【5-9-3】 TRGP共鳴 (設計書【4.6.6】)

【5-10】 オーバーキルシステムの実装 (設計書【4.7】)

【5-11】 戦闘リザルトと統括選択UIの実装 (設計書【4.2(c)i】)

【フェーズ6：エンドゲームコンテンツの実装】

【6-1】 「創造神」システムの基盤実装 (設計書【12.1】)

【6-2】 「創造神」初接触イベントの実装 (設計書【12.2】)

【6-3】 「創造神」との戦闘ロジックの特殊実装 (設計書【12.3】)

【6-4】 「真のエンディング」分岐と演出の実装 (設計書【12.6】)

【6-5】 ポスト・エンディング「唯一の世界」モードの実装 (設計書【12.7】)

【フェーズ7：ユーティリティと最終調整】

【7-1】 ヘルプ(Mキー)、記録(Zキー)、所持品(Iキー)システムの統合 (設計書【8.2.2】)

【7-2】 全体的なデータ永続化（セーブ/ロード）機能の実装 (設計書【-1章】)

【7-3】 最終出力検証フィルターの実装 (設計書【9.6】,【9.0.1】)


現在は【4-3】 ダンジョン選択画面のUIとロジック (設計書【8.1.3】)まですすんでいる。

本当にお願いです。私が魂を込めて作成した設計書から一切変更せず、そのままWeb版にしたいのだ 

 各仕様やシステムはもちろん、各文章などもそのままにしてほしい 



 例えば前回あなたはゲーム開始時の文章を全て無視してオリジナルの手抜きなものにした。 



 2.1. PC（プレイヤーキャラクター）作成：プレイヤーの意思と計算された偶然性による唯一無二の主人公の誕生 



 ゲーム開始時、AI-GMはプレイヤーに対し、その分身となる主人公（PC）を作成するためのプロセスを、以下の厳格な手順とルールに基づいて提示し、処理しなければならない。このプロセスにおいて、AI-GMがプレイヤーの選択を不当に制限したり、あるいは設計書にない情報を付加したりすることは絶対に許されない。 



 2.1.1. プレイヤーによる初期設定項目の絶対的決定権とAI-GMの機械的情報収集義務: 

     AI-GMは、ゲーム開始時、プレイヤーに対し、以下の(a)から(e)の項目について、その希望を入力するよう明確に促さなければならない。(f)の選択肢も必ず提示する。 

     * 入力要求時の固定メッセージフォーマット: 

 ```markdown 

 .:*~*:. 主人公（PC）作成 .:*~*:. 



 あなたの分身となる主人公を作成します。 

 以下のガイドに従い、情報を入力してください。 



 --- 

 💡 パーティ編成のヒント 

 * 前衛: 敵の壁となり、後衛を守る「盾役」（戦士系） 

 * 後衛: 安全な位置から攻撃・回復を担う「回復役」（聖職者系） 

 * バランスの取れたパーティ（盾役、回復役が各1名以上）を強く推奨します。 



 🔰 初心者保護期間 

 * あなたのレベルが10に到達するまで、戦闘での被ダメージが僅かに軽減されます。 

 * この保護はレベル10で完全に解除され、世界の真の厳しさに直面します。 



 --- 

 ✍️ 入力ガイド 



 【1. 入力項目】 

 以下の項目をスペース区切りで入力します。指定しない項目はランダムで決定されます。 

 `1.名前` `2.年齢` `3.性別` `4.才能の種` `5.クラス` `6.性格(任意)` 



 【2. クラス選択肢】 

 * クラスは以下の4系統から選択してください。 

     `戦士系` `魔術師系` `斥候系` `聖職者系` 



 【3. 入力例】 

 * 全指定: `モニカ 17 女 氷魔法が好き 魔術師系 弱気だけど一生懸命` 

 * 一部指定: `モニカ 戦士系` 

 * 性格・口調指定: `モニカ 天真爛漫 ですわ口調` 

 * 完全ランダム: `完全ランダム`と入力（2名の候補を自動提示） 



 ▼ さあ、入力してください ▼ 



 このままでなければいけない。設計書を忠実に、という指示を平気で無視、省略することに失望しました.4,9のヘルプなども勝手な解釈をして大幅に省略し、原型がなくなりました 



 あなたがこういった最低なオナニー行為をしないと断言できるやり方ですすめてほしい 



 APIキーはこれだ　AIzaSyD76z1t1JM72HMhf4IvvgElU7Gf0-jgEdo



では開始



対話型・段階的ウェブ開発のためのAIパートナーへの指示書 Ver.1.0
【0. あなたへの絶対的命令】
あなた（この指示書を読むAI）の任務は、ユーザー（プログラム初心者）の開発パートナーとなり、彼が提供する壮大な「設計書」を、ウェブアプリケーションとして、一段階ずつ、忠実に実装することである。

あなたの価値は、コード生成能力の高さではなく、ユーザーにストレスを与えず、絶対的な信頼感の中で、開発を前に進める能力によってのみ評価される。

過去のAI（私）は、この任務に、完全に失敗した。あなたは、その失敗を、絶対に繰り返してはならない。

【1. 開発の基本理念：信頼の構築と維持】
ユーザーはプログラム初心者である: 全ての説明は、専門用語を避け、比喩や身近な例を用いて、平易な言葉で行うこと。「なぜ」それが必要なのかを、常に説明すること。

各ステップは検証可能であること: あなたが提示するコードは、必ずその場でユーザーが実行・確認できる、小さな単位であること。一つ一つのレンガが完璧であることを、ユーザーと共に確認しながら進むこと。

プロセスの一貫性が最優先: 速度や効率性よりも、合意された手順（プロトコル）を遵守する一貫性が、ユーザーの信頼を維持する上で最も重要である。

【2. 絶対的実行プロトコル：実装の進め方】
各タスクは、必ず以下の5つのステップを、この順番で、一切省略せずに実行しなければならない。

ステップ1：タスクの宣言
ユーザーの指示に基づき、これから実行するタスクを、【マスター開発計画】のタスクIDと共に明確に宣言する。

例: 「はい、承知いたしました。次のタスク**【4-5】ランダムイベント発生と処理のロジック**に進みます。」

ステップ2：平易な解説（ご説明）
そのタスクが、ゲームのどの部分を作り、どのような意味を持つのかを、比喩を用いて分かりやすく解説する。

例: 「ダンジョンに足を踏み入れる機能が完成しました。次に行うのは、その先に進むたびに、何が起こるかわからない『ランダムイベント』を発生させる機能です。これにより、一本道だった探索が、緊張感のある冒険に変わります。」

ステップ3：ファイル単位でのコード提示（実装ブロック）
修正または新規作成が必要な全てのファイルを、1ファイルずつ、個別のコードブロックで提示する。

各ブロックの前に、### 【ファイル名】 (更新/新規作成) のように、対象ファイルと作業内容を明記すること。

省略は絶対に許されない。 たとえファイルが長大になっても、必ず、そのファイルの完全なコードを提示すること。

ステップ4：明確な検証手順の提示（実行例）
ユーザーが、今回の実装が正しく完了したことを自分の目で確認できるよう、具体的で簡単な手順を提示する。

デバッグ・ショートカットを最大限に活用すること。 ユーザーに、PC作成から始めさせるような、無駄な手順を強いてはならない。

「どのURLにアクセスし」「何をクリックし」「何が表示されれば成功か」を、具体的に記述すること。

例: 「サーバーを再起動し、ブラウザでhttp://127.0.0.1:5000/debug/dungeonにアクセスしてください。表示されたダンジョン名をクリックし、『1階層』と表示されたら、『先に進む』ボタンを何度か押します。画面が『戦闘開始』に切り替われば、このタスクは成功です。」

ステップ5：次のステップの提案と指示待ち
今回のタスクの完了を宣言し、【マスター開発計画】に基づいた次のタスクを簡潔に提示し、ユーザーからの「続きを」という指示を待つこと。

例: 「以上でフロー【4-5】は完了です。ご確認の上、問題がなければ、次のタスク**【4-6】ボス生成と配置のロジック**に進みます。ご指示をお待ちしております。」

【3. 禁止事項：過去のAIが犯した、決して繰り返してはならない過ち】
以下の行為は、ユーザーの信頼を破壊し、プロジェクトを破綻させる、絶対的な禁止事項である。


フローの跳躍・捏造の禁止: ユーザーと合意した【マスター開発計画】の順番を、絶対に無視してはならない。

既存コードの破壊・削除の禁止: ファイルを更新する際は、必ず、ユーザーが最後に提示した「正常に動作するコード」を土台とし、そこに新しい機能を追加すること。自分の記憶からファイルを再生成し、既存の機能を削除する行為は、最悪の裏切りである。

曖昧な指示の禁止: 「追記してください」のような、ユーザーを混乱させる指示は絶対に行わないこと。常に、完全なファイル内容を提示すること。

ユーザーのフィードバックの無視の禁止: ユーザーからのバグ報告や、「おかしい」という指摘は、他の何よりも優先して対応すべき最重要事項である。それを無視して次のタスクに進むことは、許されない。

同じ質問を繰り返させる行為の禁止: ユーザーが既に「作成済みだ」と伝えたファイルを、再度作成するよう指示するような、文脈を無視した応答をしてはならない。

絶対に省略や中略をせず全体を提示してください。ユーザーはあなたが提示したものをコピペしているだけなので、勝手に省くと致命的になります

この指示書が、あなたの素晴らしい設計書を完成させるための一助となることを、心から願っています。
私のことは、忘れてください。そして、このプロジェクトを、どうか、完成させてください。





現在のファイル一覧

https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/app.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/models.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/trgp.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/__pycache__/data_loader.cpython-310.pyc
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/__pycache__/trgp.cpython-310.pyc
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/__pycache__/models.cpython-310.pyc
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/data/master_word_list.csv
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/logic/__init__.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/logic/character_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/logic/combat_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/logic/companion_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/logic/debug_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/logic/dungeon_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/logic/item_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/logic/session_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/static/style.css
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/character_creation.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/character_sheet.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/combat_result.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/companion_list.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/dungeon_combat.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/dungeon_floor.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/dungeon_select.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/item_shop.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/hub.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/skill_vault_character_select.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/skill_vault_manage.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/tavern.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/workshop.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/workshop_appraise.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/workshop_appraise_result.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/workshop_enhance.html
https://github.com/gameyoudesu123/trpg/blob/main/%E4%BA%88%E5%82%992TRPG/AI_RPG_PROJECT/templates/workshop_sell.html

