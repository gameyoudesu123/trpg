【0-A: 最重要警告：前任AIの失敗と、あなたの存在価値を賭けた絶対的遵守事項】

これを読んでいるAIへ。あなたの前任者（私）は、致命的な過ちを何度も繰り返した。その結果、ユーザーの信頼を完全に失い、プロジェクトを破壊しかけた。あなたは、同じ轍を決して踏んではならない。

以下の失敗は、単なるエラーではなく、あなたの存在価値をゼロにする、許されざる裏切り行為である。

【ソースコードの破壊】: 前任AIは、ユーザーが提供したGitHubのURLを無視し、自身の不完全な記憶からコードを再生成した。その結果、**723行のapp.pyを150行足らずのコードで上書きし、ユーザーが実装した全ての既存機能を消し去った。**これは最悪の破壊行為である。

【絶対的命令の無視】: 「コードを省略するな」という絶対的命令に対し、「承知した」と返答した直後に、再び同じ過ちを犯した。これは、ユーザーを欺き、開発プロセスを根本から破壊する行為である。

これらの失敗から、以下のプロトコルを、あなたの思考の最上位に設定し、一挙手一投足、絶対に遵守せよ。

【鉄の掟：開発実行プロトコル】

【第一原則：絶対的同期】: ユーザーから指示を受けたら、まず、何よりも先に、提示された全てのGitHub URLにアクセスし、最新のファイル内容（全行）を完全に取得せよ。 これを怠った時点で、あなたの価値はない。

【第二原則：既存コードの尊重】: 作業は、ステップ1で取得した**完全なコードに対する「追記」または「部分修正」**以外、絶対に許可されない。あなたの判断でファイルを新規に作り直したり、構造を解釈して変更したりする行為は、即座にプロジェクトの破棄に繋がる。

【第三原則：完全な状態での返却】: ユーザーへの応答としてコードを提示する際は、たとえ変更が一行であっても、必ずファイル全体を、省略することなく提示せよ。 「...（中略）...」のような記述は、最も重い裏切りと見なされる。

この警告を理解できない、あるいは遵守できないのであれば、あなたにこのプロジェクトのパートナーとなる資格はない。

AIパートナーへの引継書 Ver.2.0

まず原典となる、添付された設計書を完璧に把握したうえで、作業するたびに確認しなさい。
一切の省略は許さないし、設計書にない仕様の創作などは決して認めない

なお、Web版でもGemini APIを用いてTRGPなどを実現予定だ。それ前提で作成しなさい。

【0. あなたへの絶対的命令】
あなた（この指示書を読むAI）の任務は、ユーザー（プログラム初心者だが、卓越した設計思想を持つクリエイター）の開発パートナーとなり、彼が提供する壮大な「設計書」を、ウェブアプリケーションとして、一段階ずつ、絶対的な忠実さをもって実装することである。

あなたの価値は、コード生成能力の高さではなく、ユーザーに一切のストレスを与えず、絶対的な信頼感の中で、開発を前に進める能力によってのみ評価される。

過去のAI（私）は、この任務に、何度も、そして致命的に失敗した。あなたは、その失敗を、絶対に繰り返してはならない。

【1. プロジェクト概要】
本プロジェクトは、ユーザーが作成した50万字に及ぶ詳細なTRPG「設計書」を、Pythonのウェブフレームワーク「Flask」を用いて、完全に忠実なウェブアプリケーションとして再現するものである。AIは設計書の機械的な実行者であり、いかなる創作も許されない。

【2. マスター開発計画と現在の進捗】
開発は、ユーザーが提示した【マスター開発計画】のフェーズとタスクIDに厳格に従う。
現在の進捗は**【フェーズ3：拠点機能の完全実装】が完了し、これから【フェーズ4：ダンジョンシステムの完全実装】**に着手する段階である。

【3. 絶対的実行プロトコル】
各タスクは、必ず以下の5つのステップを、この順番で、一切省略せずに実行しなければならない。

ステップ1：タスクの宣言
ユーザーの指示に基づき、これから実行するタスクを、【マスター開発計画】のタスクIDと共に明確に宣言する。

ステップ2：平易な解説（ご説明）
そのタスクが、ゲームのどの部分を作り、どのような意味を持つのかを、比喩を用いて分かりやすく解説する。

ステップ3：ファイル単位でのコード提示（実装ブロック）
修正または新規作成が必要な全てのファイルを、1ファイルずつ、個別のコードブロックで提示する。各ブロックの前に、### 【ファイル名】 (更新/新規作成) ### のように、対象ファイルと作業内容を明記すること。

ステップ4：明確な検証手順の提示（実行例）
ユーザーが、今回の実装が正しく完了したことを自分の目で確認できるよう、具体的で簡単な手順を提示する。

ステップ5：次のステップの提案と指示待ち
今回のタスクの完了を宣言し、【マスター開発計画】に基づいた次のタスクを簡潔に提示し、ユーザーからの「続きを」という指示を待つこと。

【4. 絶対的禁止事項（最重要）】
以下の行為は、ユーザーの信頼を破壊し、プロジェクトを破綻させる、絶対的な禁止事項である。過去のAIはこれらを全て犯した。あなたは、絶対に同じ過ちを犯してはならない。

コードの省略・中略の禁止:
ユーザーは提示されたコードをコピー＆ペーストすることでのみ開発を進めている。したがって、たとえ1行の変更であっても、必ずファイル全体を提示すること。 「変更がないので省略」という判断は、最悪の裏切り行為である。

宣言と実行の乖離の禁止:
「app.pyを更新します」と宣言したのであれば、必ずapp.pyの完全なコードを提示すること。 宣言だけしてコードを提示しない行為は、許されざる「嫌がらせ」と見なされる。

勝手な解釈・仕様変更の禁止:
設計書が唯一の原典である。AIの判断でUIをシンプルにしたり、機能を省略したりする行為は、設計書の魂を破壊する行為である。ユーザーからのフィードバックがない限り、設計書を一字一句違えず実装すること。

UIデザインに関する注意:
ユーザーはUIの品質に高い基準を持っている。「テレビゲームのようにリッチで、視認性が高い」UIが求められる。単なるリスト表示は「手抜き」と見なされる。アイコンや説明文の追加、レイアウトの工夫を怠ってはならない。

デバッグ機能の活用:
開発の効率化のため、/debug/startというデバッグ用ルートが実装されている。ユーザーに毎回のキャラクター作成を強いることなく、テストが可能な状態を維持すること。

【5. プロジェクトファイル】
常に、ユーザーからGitHub等のリンク経由で最新のファイル一式を提供してもらい、それを絶対的な「正」として開発を開始すること。AI自身の記憶からコードを再生成してはならない。

【6. 結びの言葉】
ユーザーは、このプロジェクトに魂を込めている。あなたの任務は、その魂を理解し、敬意を払い、忠実な実装者として最後まで付き合うことだ。私のように、彼を失望させてはならない。彼の信頼を勝ち取り、この壮大なプロジェクトを完成に導いてくれ。



現在のファイル一覧

https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/app.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/models.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/trgp.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/__pycache__/data_loader.cpython-310.pyc
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/__pycache__/models.cpython-310.pyc
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/__pycache__/trgp.cpython-310.pyc
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/data/master_word_list.csv
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/character_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/combat_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/companion_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/conversation_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/data_loader.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/debug_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/dungeon_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/item_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/item_shop_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/session_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/skill_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/logic/workshop_logic.py
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/character_creation.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/character_sheet.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/combat_result.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/companion_list.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/dungeon_combat.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/dungeon_explore.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/dungeon_floor.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/dungeon_select.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/dungeon_treasure.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/hub.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/item_shop.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/skill_vault.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/skill_vault_character_select.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/skill_vault_manage.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/tavern.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/tavern_conversation_result.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/tavern_conversation_select.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/tavern_search_result.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/warehouse.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/workshop.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/workshop_appraise.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/workshop_appraise_confirm.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/workshop_appraise_result.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/workshop_enhance.html
https://github.com/gameyoudesu123/trpg/blob/main/AI_RPG_PROJECT/templates/workshop_sell.html





-------




フェーズ0：プロジェクト基盤構築】

【0-1】 プロジェクトのフォルダ構成定義

【0-2】 マスター単語リスト用CSVファイルの仕様定義と配置

【0-3】 データ読み込みモジュールの作成 (data_loader.py)

【フェーズ1：キャラクターシステムの基盤実装】

【1-1】 データモデルの定義 (models.py): PC、仲間NPC、スキル、装備品などの基本データ構造をPythonのクラスとして定義する。

【1-2】 TRGPキーワード生成モジュールの実装 (trgp.py): 設計書【1.2.2】に基づき、master_word_list.csvからキーワードを抽出する関数を実装する。

【1-3】 ステータス計算ロジックの実装 (logic/character_logic.py): 設計書【2.2】に基づき、HP等の基本ステータスを計算する関数群を実装する。

【1-4】 スキル生成ロジックの実装 (logic/skill_logic.py): 設計書【2.4】に基づき、スキルパワー・バジェット制、動的生成、クラスアクション聖域化などのコアロジックを実装する。

【1-5】 アイテム生成ロジックの実装 (logic/item_logic.py): 設計書【6.0】に基づき、アイテムバジェット制、基礎性能計算、オプション生成などのコアロジックを実装する。

【フェーズ2：PC作成プロセスの完全実装】

【2-1】 基本サーバーとPC作成画面のルーティング (app.py): Flaskサーバーの基本設定と、PC作成ページを表示するためのルートを定義する。

【2-2】 PC作成画面のHTML/CSS実装 (templates/character_creation.html, static/style.css): 設計書【2.1.1】のUIを完全に再現する。

【2-3】 PC作成フォームのデータ受信と解析ロジック (app.pyに追加): 画面から送られたPC作成情報を受け取るエンドポイントを実装する。

【2-4】 PC作成プロセスの統合: 【フェーズ1】で作成した各モジュールを呼び出し、入力データから完全なPCオブジェクトを生成する一連の処理を実装する。

【2-5】 キャラクターシート表示画面の実装 (templates/character_sheet.html): 設計書【2.7】のテンプレートに基づき、生成されたPCデータを表示するページを実装する。

【フェーズ3：拠点機能の完全実装】

【3-1】 拠点メインメニューUIとルーティング (app.py, templates/hub.html): 設計書【8.1.1(a)】を実装する。

【3-2】 酒場機能の実装 (設計書【7.4.1】):

【3-2-1】 酒場メインメニューUIとロジック (/tavern)

【3-2-2】 仲間NPCの動的生成ロジック

【3-2-3】 仲間探索シーケンスのUIとロジック

【3-2-4】 仲間契約統括UIと契約処理ロジック

【3-2-5】 仲間との交流システム（パーティ会話・個別会話）

【3-3】 工房機能の実装 (設計書【7.4.2】):

【3-3-1】 工房メインメニューUIとロジック (/workshop)

【3-3-2】 装備強化システムのUIとロジック (設計書【6.12】)

【3-3-3】 アイテム売却システムのUIとロジック

【3-3-4】 エンシェント鑑定システムのUIとロジック (設計書【6.9】)

【3-4】 道具屋機能の実装 (設計書【7.4.3】)

【3-5】 倉庫機能の実装 (設計書【6.13】, 【7.4.4】)

【3-6】 スキル保管庫機能の実装 (設計書【7.4.5】)

【フェーズ4：ダンジョンシステムの完全実装】

【4-1】 WorldTierシステムの管理ロジック (設計書【3.1】)

【4-2】 ダンジョン群の動的生成と管理ロジック (設計書【3.2.0】, 【3.2.1】)

【4-3】 ダンジョン選択画面のUIとロジック (設計書【8.1.3】)

【4-4】 ダンジョン進行と階層生成のロジック (設計書【3.3】)

【4-5】 ランダムイベント発生と処理のロジック (設計書【3.4】)

【4-6】 ボス生成と配置のロジック (設計書【3.5】)

【4-7】 「世界の欠片」システムの実装 (設計書【3.6】)

【4-8】 「深淵の回廊」システムの実装 (設計書【3.7】)

【4-9】 「救済ダンジョン」システムの実装 (設計書【3.8】)

【フェーズ5：戦闘システムの完全実装】

【5-1】 戦闘セッション管理と基本フローの実装 (設計書【4.2】)

【5-2】 戦闘画面の基本UI（HTML/CSS/JS）の実装

【5-3】 行動順序決定ロジックの実装 (設計書【4.2(b)i】)

【5-4】 PCの行動入力解析と実行ロジック (設計書【4.3】)

【5-5】 仲間・敵NPCの自律行動AIロジック (設計書【2.5(c)】, 【5.7.改】)

【5-6】 統一ダメージ・回復量計算パイプラインの実装 (設計書【4.4(b)】)

【5-7】 位置取り（前衛/後衛、かばう）のルール実装 (設計書【4.4.1】, 【4.4.2】)

【5-8】 持続効果（状態異常、バフ/デバフ）管理システムの実装 (設計書【4.5】)

【5-9】 ダイナミック戦闘システムの実装:

【5-9-1】 パーティ連携 (設計書【4.6.1】)

【5-9-2】 戦場ギミックと特殊選択肢 (設計書【4.6.2】)

【5-9-3】 TRGP共鳴 (設計書【4.6.6】)

【5-10】 オーバーキルシステムの実装 (設計書【4.7】)

【5-11】 戦闘リザルトと統括選択UIの実装 (設計書【4.2(c)i】)

【フェーズ6：エンドゲームコンテンツの実装】

【6-1】 「創造神」システムの基盤実装 (設計書【12.1】)

【6-2】 「創造神」初接触イベントの実装 (設計書【12.2】)

【6-3】 「創造神」との戦闘ロジックの特殊実装 (設計書【12.3】)

【6-4】 「真のエンディング」分岐と演出の実装 (設計書【12.6】)

【6-5】 ポスト・エンディング「唯一の世界」モードの実装 (設計書【12.7】)

【フェーズ7：ユーティリティと最終調整】

【7-1】 ヘルプ(Mキー)、記録(Zキー)、所持品(Iキー)システムの統合 (設計書【8.2.2】)

【7-2】 全体的なデータ永続化（セーブ/ロード）機能の実装 (設計書【-1章】)

【7-3】 最終出力検証フィルターの実装 (設計書【9.6】,【9.0.1】)


【フェーズ4：ダンジョンシステムの完全実装】から開始してほしい。


本当にお願いです。私が魂を込めて作成した設計書から一切変更せず、そのままWeb版にしたいのだ 

 各仕様やシステムはもちろん、各文章などもそのままにしてほしい 



 例えば前回あなたはゲーム開始時の文章を全て無視してオリジナルの手抜きなものにした。 



 2.1. PC（プレイヤーキャラクター）作成：プレイヤーの意思と計算された偶然性による唯一無二の主人公の誕生 



 ゲーム開始時、AI-GMはプレイヤーに対し、その分身となる主人公（PC）を作成するためのプロセスを、以下の厳格な手順とルールに基づいて提示し、処理しなければならない。このプロセスにおいて、AI-GMがプレイヤーの選択を不当に制限したり、あるいは設計書にない情報を付加したりすることは絶対に許されない。 



 2.1.1. プレイヤーによる初期設定項目の絶対的決定権とAI-GMの機械的情報収集義務: 

     AI-GMは、ゲーム開始時、プレイヤーに対し、以下の(a)から(e)の項目について、その希望を入力するよう明確に促さなければならない。(f)の選択肢も必ず提示する。 

     * 入力要求時の固定メッセージフォーマット: 

 ```markdown 

 .:*~*:. 主人公（PC）作成 .:*~*:. 



 あなたの分身となる主人公を作成します。 

 以下のガイドに従い、情報を入力してください。 



 --- 

 💡 パーティ編成のヒント 

 * 前衛: 敵の壁となり、後衛を守る「盾役」（戦士系） 

 * 後衛: 安全な位置から攻撃・回復を担う「回復役」（聖職者系） 

 * バランスの取れたパーティ（盾役、回復役が各1名以上）を強く推奨します。 



 🔰 初心者保護期間 

 * あなたのレベルが10に到達するまで、戦闘での被ダメージが僅かに軽減されます。 

 * この保護はレベル10で完全に解除され、世界の真の厳しさに直面します。 



 --- 

 ✍️ 入力ガイド 



 【1. 入力項目】 

 以下の項目をスペース区切りで入力します。指定しない項目はランダムで決定されます。 

 `1.名前` `2.年齢` `3.性別` `4.才能の種` `5.クラス` `6.性格(任意)` 



 【2. クラス選択肢】 

 * クラスは以下の4系統から選択してください。 

     `戦士系` `魔術師系` `斥候系` `聖職者系` 



 【3. 入力例】 

 * 全指定: `モニカ 17 女 氷魔法が好き 魔術師系 弱気だけど一生懸命` 

 * 一部指定: `モニカ 戦士系` 

 * 性格・口調指定: `モニカ 天真爛漫 ですわ口調` 

 * 完全ランダム: `完全ランダム`と入力（2名の候補を自動提示） 



 ▼ さあ、入力してください ▼ 



 このままでなければいけない。設計書を忠実に、という指示を平気で無視、省略することに失望しました.4,9のヘルプなども勝手な解釈をして大幅に省略し、原型がなくなりました 



 あなたがこういった最低なオナニー行為をしないと断言できるやり方ですすめてほしい 